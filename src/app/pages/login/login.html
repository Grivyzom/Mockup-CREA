<section class="login-wrap">
  <div class="login-card" role="form" aria-labelledby="login-title">
    <h1 id="login-title">Inicio de sesión</h1>
    <p class="subtitle">Accede con tu correo y contraseña.</p>

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div class="field">
        <label for="email">Correo</label>
        <input id="email" type="email" formControlName="email" [attr.aria-invalid]="email?.invalid && (email?.touched || email?.dirty)" autocomplete="email"/>
        <div class="hint error" *ngIf="email?.invalid && (email?.touched || email?.dirty)">
          <span *ngIf="email?.errors?.['required']">El correo es obligatorio.</span>
          <span *ngIf="email?.errors?.['email']">Formato de correo inválido.</span>
        </div>
      </div>

      <div class="field">
        <label for="password">Contraseña</label>
        <div class="password-row">
          <input id="password" [type]="passwordVisible ? 'text' : 'password'" formControlName="password" autocomplete="current-password"/>
          <button type="button" class="toggle" (click)="togglePassword()" [attr.aria-pressed]="passwordVisible">{{ passwordVisible ? 'Ocultar' : 'Mostrar' }}</button>
        </div>
        <div class="hint error" *ngIf="password?.invalid && (password?.touched || password?.dirty)">
          <span *ngIf="password?.errors?.['required']">La contraseña es obligatoria.</span>
          <span *ngIf="password?.errors?.['minLength']">Mínimo 6 caracteres.</span>
        </div>
      </div>

      <div class="row between">
        <label class="checkbox">
          <input type="checkbox" formControlName="remember"/>
          <span>Recordarme</span>
        </label>
        <a href="#" class="link" data-no-nav>¿Olvidaste tu contraseña?</a>
      </div>

      <button type="submit" class="submit" [disabled]="loading || form.invalid">
        <span *ngIf="!loading">Entrar</span>
        <span *ngIf="loading" class="spinner" aria-hidden="true"></span>
      </button>

      <p class="hint error" *ngIf="error">{{ error }}</p>
    </form>
  </div>
</section>
